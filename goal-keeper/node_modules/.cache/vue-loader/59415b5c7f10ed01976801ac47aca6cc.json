{"remainingRequest":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/src/components/accessmanagement/UpdatePassword.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/src/components/accessmanagement/UpdatePassword.vue","mtime":1620157880782},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7CmltcG9ydCBCdXR0b24gZnJvbSAiQC9jb21wb25lbnRzL2NvbW1vbi9CdXR0b24udnVlIjsKaW1wb3J0IElucHV0RmllbGQgZnJvbSAiQC9jb21wb25lbnRzL2NvbW1vbi9JbnB1dEZpZWxkLnZ1ZSI7CmltcG9ydCBBdXRoQmFja2VuZCBmcm9tICJAL2JhY2tlbmQvQXV0aEJhY2tlbmQiOwoKQENvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogICAgSW5wdXRGaWVsZCwKICAgIEJ1dHRvbgogIH0KfSkKZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXBkYXRlUGFzc3dvcmQgZXh0ZW5kcyBWdWUgewoKICBwcml2YXRlIGludmFsaWRUb2tlbjogYm9vbGVhbiA9IGZhbHNlOwogIHByaXZhdGUgcGFzc3dvcmRJc1ZhbGlkOiBib29sZWFuID0gdHJ1ZTsKICBwcml2YXRlIHBhc3N3b3JkVXBkYXRlZDogYm9vbGVhbiA9IGZhbHNlOwogIHByaXZhdGUgcGFzc3dvcmRDb25maXJtSXNWYWxpZDogYm9vbGVhbiA9IHRydWU7CiAgcHJpdmF0ZSBwYXNzd29yZDogc3RyaW5nID0gIiI7CiAgcHJpdmF0ZSBwYXNzd29yZENvbmZpcm06IHN0cmluZyA9ICIiOwogIHByaXZhdGUgdG9rZW4gPSAiIjsKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMudG9rZW4gPSB0aGlzLiRyb3V0ZS5xdWVyeS50b2tlbiBhcyBzdHJpbmc7CiAgICBpZiAodGhpcy50b2tlbi5sZW5ndGggPiAwKSB7CiAgICAgIEF1dGhCYWNrZW5kLnZhbGlkYXRlUGFzc3dvcmRUb2tlbih0aGlzLnRva2VuKQogICAgICAudGhlbigoKSA9PiB7CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDApIHsKICAgICAgICAgIHRoaXMuaW52YWxpZFRva2VuID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5pbnZhbGlkVG9rZW4gPSB0cnVlOwogICAgfQogIH0KCiAgcHJpdmF0ZSBuYXZpZ2F0ZVRvTG9naW4oKSB7CiAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgfQoKICBwcml2YXRlIHNldFBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcpIHsKICAgIHRoaXMucGFzc3dvcmQgPSBwYXNzd29yZDsKICB9CgogIHByaXZhdGUgc2V0UGFzc3dvcmRDb25maXJtKHBhc3N3b3JkOiBzdHJpbmcpIHsKICAgIHRoaXMucGFzc3dvcmRDb25maXJtID0gcGFzc3dvcmQ7CiAgfQoKICBoYW5kbGVQYXNzd29yZFJlc2V0KCkgewogICAgdGhpcy5wYXNzd29yZElzVmFsaWQgPSB0aGlzLnBhc3N3b3JkLmxlbmd0aCA+IDA7CiAgICB0aGlzLnBhc3N3b3JkQ29uZmlybUlzVmFsaWQgPSB0aGlzLnBhc3N3b3JkID09PSB0aGlzLnBhc3N3b3JkQ29uZmlybTsKICAgIGlmICh0aGlzLnBhc3N3b3JkSXNWYWxpZCAmJiB0aGlzLnBhc3N3b3JkQ29uZmlybUlzVmFsaWQpIHsKICAgICAgQXV0aEJhY2tlbmQuc2F2ZVBhc3N3b3JkKHRoaXMucGFzc3dvcmQsIHRoaXMudG9rZW4pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMucGFzc3dvcmRVcGRhdGVkID0gdHJ1ZTsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMCkgewogICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJykKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KCn0K"},{"version":3,"sources":["UpdatePassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"UpdatePassword.vue","sourceRoot":"src/components/accessmanagement","sourcesContent":["<template>\n  <div class=\"columns is-vcentered\">\n    <div class=\"login column is-4 \">\n      <section class=\"section\">\n        <div class=\"4\">\n          <div class=\"has-text-centered\">\n            <img id=\"logo\" src=\"../../assets/images/logo_goalkeeper_white.png\" width=\"250\"  alt=\"\">\n          </div>\n        </div>\n        <div v-if=\"!invalidToken && !passwordUpdated\">\n          <p v-if=\"!passwordIsValid\" class=\"help is-danger\">Please enter a new password</p>\n          <p v-if=\"!passwordConfirmIsValid\" class=\"help is-danger\">Please make sure both passwords match</p>\n          <InputField class-name=\"input is-primary\" type=\"password\" @inputChanged=\"setPassword\" place-holder=\"Please enter your new password\" :input-value=\"password\"></InputField>\n          <InputField id=\"password-input\" class-name=\"input is-primary\" type=\"password\" @inputChanged=\"setPasswordConfirm\" place-holder=\"Confirm password\" :input-value=\"passwordConfirm\"></InputField>\n          <div class=\"has-text-centered\">\n            <Button class-name=\"button is-centered is-primary is-outlined\"\n                    text=\"Update password\"\n                    @clicked=\"handlePasswordReset\"/>\n          </div>\n        </div>\n        <div v-if=\"invalidToken || passwordUpdated\">\n          <h2 v-if=\"invalidToken\" class=\"subtitle has-text-centered\">Invalid reset token. Your password reset token is either invalid or expired. Please try resetting the password again</h2>\n          <h2 v-if=\"passwordUpdated\" class=\"subtitle has-text-centered\">Your password has been updated</h2>\n          <div class=\"has-text-centered\">\n            <Button class-name=\"button is-centered is-primary is-outlined no-background\"\n                    text=\"Go to login\"\n                    @clicked=\"navigateToLogin\"/>\n          </div>\n        </div>\n      </section>\n    </div>\n    <div id=\"particles-js\" class=\"interactive-bg column is-8\">\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue } from \"vue-property-decorator\";\nimport Button from \"@/components/common/Button.vue\";\nimport InputField from \"@/components/common/InputField.vue\";\nimport AuthBackend from \"@/backend/AuthBackend\";\n\n@Component({\n  components: {\n    InputField,\n    Button\n  }\n})\nexport default class UpdatePassword extends Vue {\n\n  private invalidToken: boolean = false;\n  private passwordIsValid: boolean = true;\n  private passwordUpdated: boolean = false;\n  private passwordConfirmIsValid: boolean = true;\n  private password: string = \"\";\n  private passwordConfirm: string = \"\";\n  private token = \"\";\n\n  mounted() {\n    this.token = this.$route.query.token as string;\n    if (this.token.length > 0) {\n      AuthBackend.validatePasswordToken(this.token)\n      .then(() => {\n      }).catch(error => {\n        if (error.response.status === 400) {\n          this.invalidToken = true;\n        }\n      });\n    } else {\n      this.invalidToken = true;\n    }\n  }\n\n  private navigateToLogin() {\n    this.$router.push(\"/login\");\n  }\n\n  private setPassword(password: string) {\n    this.password = password;\n  }\n\n  private setPasswordConfirm(password: string) {\n    this.passwordConfirm = password;\n  }\n\n  handlePasswordReset() {\n    this.passwordIsValid = this.password.length > 0;\n    this.passwordConfirmIsValid = this.password === this.passwordConfirm;\n    if (this.passwordIsValid && this.passwordConfirmIsValid) {\n      AuthBackend.savePassword(this.password, this.token).then(() => {\n        this.passwordUpdated = true;\n      }).catch(error => {\n        if (error.response.status === 400) {\n          console.log('error')\n        }\n      });\n    }\n  }\n\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.interactive-bg {\n  height: 100vh;\n  background-color: #00d1b2;\n  -webkit-box-shadow: inset 24px 4px 64px -24px rgba(71,71,71,1);\n  -moz-box-shadow: inset 24px 4px 64px -24px rgba(71,71,71,1);\n  box-shadow: inset 24px 4px 64px -24px rgba(71,71,71,1);\n  padding: 0;\n}\n@media (max-width: 769px) {\n  .interactive-bg{\n    display: none\n  }\n}\n\n.columns{\n  margin: 0;\n}\n\n#logo {\n  margin-bottom: 30px;\n}\n\n#password-input {\n  margin-bottom: 40px;\n}\n\n.subtitle {\n  color: #ffffff;\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.25;\n}\n</style>\n"]}]}