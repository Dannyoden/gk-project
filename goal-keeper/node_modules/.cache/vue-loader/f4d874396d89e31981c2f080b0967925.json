{"remainingRequest":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/src/components/sessions/game/SessionGame.vue?vue&type=style&index=0&id=2c7c0486&scoped=true&lang=scss&","dependencies":[{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/src/components/sessions/game/SessionGame.vue","mtime":1618387844703},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiR0ZWFtLW9uZS1zZWxlY3RlZDogcmdiKDg4LCAxOTYsIDYyKTsKJHRlYW0tb25lLXVuc2VsZWN0ZWQ6IHJnYmEoMjA2LCAyMDcsIDIwNywgMC4yKTsKJHRlYW0tdHdvLXNlbGVjdGVkOiByZ2IoMjU1LCAxNjUsIDApOwokdGVhbS10d28tdW5zZWxlY3RlZDogcmdiKDI1NSwgMTY1LCAwLCAwLjIpOwoKLmJvZHkgewogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAvL2JhY2tncm91bmQ6IHJnYigyNDUsIDI0NSwgMjQ1KTsKICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiaHR0cDovL3d3dy5wcHRiYWNrLmNvbS91cGxvYWRzL2Zvb3RiYWxsLXNvY2Nlci1maWVsZC1iYWNrZ3JvdW5kcy1wb3dlcnBvaW50LmpwZyIpOwoKCn0KCi5ib2R5ICNjb250ZW50IHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWJhc2lzOiAxMDAlOwogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjsKICAgIG1hcmdpbjogMjBweDsKCiAgICAuYWdpbGUgewogICAgICAgIC1tcy10b3VjaC1hY3Rpb246IHBhbi15OwogICAgICAgIHRvdWNoLWFjdGlvbjogcGFuLXk7CgogICAgICAgIFtpZF49dGVhbV0gewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgIH0KICAgIH0KCiAgICAjdGVhbS10YWJzICN0YWJzIHsKICAgICAgICBib3JkZXItY29sb3I6IHRyYW5zcGFyZW50OwoKICAgICAgICAuaGlnaGxpZ2h0LXRlYW0tb25lIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogJHRlYW0tb25lLXNlbGVjdGVkOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4OwogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7CgogICAgICAgICAgICBhIHsKICAgICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC51bmhpZ2hsaWdodC10ZWFtLW9uZSB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICR0ZWFtLW9uZS11bnNlbGVjdGVkOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4OwogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7CgogICAgICAgICAgICBhIHsKICAgICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC5oaWdobGlnaHQtdGVhbS10d28gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAkdGVhbS10d28tc2VsZWN0ZWQ7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4OwoKICAgICAgICAgICAgYSB7CiAgICAgICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6IHRyYW5zcGFyZW50OwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAudW5oaWdobGlnaHQtdGVhbS10d28gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAkdGVhbS10d28tdW5zZWxlY3RlZDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDsKICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7CgogICAgICAgICAgICBhIHsKICAgICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cgp9CgouYm9keSAjY29udGVudCAjZ2FtZS1jb25zb2xlIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWJhc2lzOiAzMCU7Cn0KCi5ib2R5IC5mb290ZXItZGV0YWlscyB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgcGFkZGluZzogNHZ3OwogICAgd2lkdGg6IDEwMHZ3OwogICAgbWluLWhlaWdodDogNnY7Cn0KCgoK"},{"version":3,"sources":["SessionGame.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmQA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SessionGame.vue","sourceRoot":"src/components/sessions/game","sourcesContent":["<template>\n    <div class=\"body\">\n        <nav-bar />\n        <div id=\"content\" v-if=\"isSessionAvailable\">\n            <SessionGameConsole id=\"game-console\"\n                :timeInMinutes=\"minutes\"\n                :first-team-score=\"firstTeamGoals\"\n                :second-team-score=\"secondTeamGoals\"\n                @show-finish-game-pop-up=\"changeShowFinishGamePopUp\">\n            </SessionGameConsole>\n            <div id=\"team-tabs\"\n                class=\"tabs is-fullwidth\">\n                <ul id=\"tabs\">\n                    <li :class=\"[currentTeam === FIRST_TEAM ? 'is-active highlight-team-one' : 'unhighlight-team-one']\">\n                        <a @click=\"currentTeam = FIRST_TEAM\"> {{ this.FIRST_TEAM }} </a>\n                    </li>\n                    <li :class=\"[currentTeam === SECOND_TEAM ? 'is-active highlight-team-one' : 'unhighlight-team-one']\">\n                        <a @click=\"currentTeam = SECOND_TEAM\"> {{ this.SECOND_TEAM }} </a>\n                    </li>\n                </ul>\n            </div>\n            <agile :dots=\"false\"\n                   :nav-buttons=\"false\"\n                   :speed=\"500\"\n                    @before-change=\"handleChangeOfTeam\">\n                <div id=\"team-first\" v-if=\"this.currentTeam === this.FIRST_TEAM\">\n                    <SessionGamePlayer\n                        v-for=\"(player, index) in firstTeamPlayers\"\n                        :key=\"index\"\n                        :player=\"player\"\n                        :session-game-team=\"FIRST_TEAM\"\n                        @player-scored=\"registerTeamGoal\"\n                        @undo-player-scored=\"unregisterTeamGoal\">\n                    </SessionGamePlayer>\n                </div>\n                <div id=\"team-second\" v-if=\"this.currentTeam === this.SECOND_TEAM\">\n                    <SessionGamePlayer\n                        v-for=\"(player, index) in secondTeamPlayers\"\n                        :key=\"index\"\n                        :player=\"player\"\n                        :session-game-team=\"SECOND_TEAM\"\n                        @player-scored=\"registerTeamGoal\"\n                        @undo-player-scored=\"unregisterTeamGoal\">\n                    </SessionGamePlayer>\n                </div>\n            </agile>\n            <PopUp\n                v-if=\"showGoBackPopUp\"\n                :pop-up-text=\"textPopUp\"\n                @decline=\"changeShowGoBackPopUp\"\n                @confirm=\"backToSessionOverview\">\n            </PopUp>\n            <PopUp\n                v-if=\"showFinishGamePopUp\"\n                :pop-up-text=\"textPopUp\"\n                @decline=\"changeShowFinishGamePopUp\"\n                @confirm=\"finishSessionGame\">\n            </PopUp>\n        </div>\n        <footer class=\"footer-details\">\n            <Button\n                :icon-data=\"{ icon: 'fas fa-angle-double-left', position: 'left' }\"\n                class-name=\"button is-centered is-danger is-outlined\"\n                text=\"Go Back\"\n                @clicked=\"changeShowGoBackPopUp\">\n            </Button>\n            <Button\n                :icon-data=\"{ icon: 'fas fa-angle-double-right', position: 'right' }\"\n                class-name=\"button is-centered is-primary is-outlined no-background\"\n                text=\"Finish\"\n                @clicked=\"changeShowFinishGamePopUp\">\n            </Button>\n        </footer>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport {Component, Vue} from 'vue-property-decorator';\nimport NavBar from '@/components/navigation/NavBar.vue';\nimport SessionDto from '@/data/dto/SessionDto';\nimport SessionModule from '@/store/modules/SessionModule';\nimport SessionGamePlayer from '@/components/sessions/game/SessionGamePlayer.vue';\nimport SessionGameConsole from '@/components/sessions/game/SessionGameConsole.vue';\nimport {GamePlayer} from '@/data/interface/GamePlayer';\nimport SessionBackend from '@/backend/SessionBackend';\nimport { findPlayerByIdAndTeam,\n    mapPlayersToGamePlayers,\n    mapGoalsToPlayersScoredList } from './SessionGameUtils';\nimport {SessionResult} from '@/data/enum/SessionResult';\nimport PopUp from '@/components/common/PopUp.vue';\nimport {namespace} from 'vuex-class';\nimport Button from '@/components/common/Button.vue';\nimport { VueAgile } from 'vue-agile';\n\nimport Routes from '@/router/Routes';\nimport {SessionGameTeam} from '@/data/enum/SessionGameTeam';\nconst SessionModuleStore = namespace('SessionModule');\n\n@Component({\n    components: {\n        Button,\n        NavBar,\n        SessionGameConsole,\n        SessionGamePlayer,\n        PopUp,\n        agile: VueAgile\n    }\n})\nexport default class SessionGame extends Vue {\n\n    @SessionModuleStore.Getter('sessionById')\n    getSessionById!: (id: string) => SessionDto;\n\n    @SessionModuleStore.Getter('currentGameSession')\n    getCurrentGameSession!: () => SessionDto;\n\n    private readonly FIRST_TEAM = SessionGameTeam.ONE;\n    private readonly SECOND_TEAM = SessionGameTeam.TWO;\n\n    textPopUp = '';\n    session: SessionDto | undefined;\n    currentTeam = this.FIRST_TEAM;\n    firstTeam: GamePlayer[] = [];\n    secondTeam: GamePlayer[] = [];\n    isSessionAvailable = true;\n    showFinishGamePopUp = false;\n    showGoBackPopUp = false;\n\n    async beforeMount() {\n        this.session = this.getCurrentGameSession();\n        if (this.session) {\n            this.firstTeam = mapPlayersToGamePlayers(this.session!.first!.players!);\n            this.secondTeam = mapPlayersToGamePlayers(this.session!.second!.players!);\n            return;\n        }\n        this.isSessionAvailable = false;\n        const sessionId = this.getSessionIdFromUrl();\n        await this.retrieveSessionFromBackend(sessionId);\n    }\n\n    get firstTeamPlayers() {\n        return this.firstTeam.sort((first: GamePlayer, second: GamePlayer) => first.details.givenName!.localeCompare(second.details.givenName!));\n    }\n\n    get secondTeamPlayers() {\n        return this.secondTeam.sort((first: GamePlayer, second: GamePlayer) => first.details.givenName!.localeCompare(second.details.givenName!));\n    }\n\n    get firstTeamGoals() {\n        let goals: number = 0;\n        this.firstTeam.forEach(player => goals += player.goals);\n        return goals;\n    }\n\n    get secondTeamGoals() {\n        let goals: number = 0;\n        this.secondTeam.forEach(player => goals += player.goals);\n        return goals;\n    }\n\n    get minutes () {\n        return this.session!.minutes;\n    }\n\n    changeShowFinishGamePopUp() {\n        this.textPopUp = 'Finish Game?';\n        this.showFinishGamePopUp = !this.showFinishGamePopUp;\n    }\n\n    changeShowGoBackPopUp() {\n        this.textPopUp = 'Quit Game?';\n        this.showGoBackPopUp = !this.showGoBackPopUp;\n    }\n\n    getSessionIdFromUrl(): string {\n        const path = this.$route.path;\n        const sessionId = path.split('/').pop();\n        if (!sessionId) {\n            throw Error('The session does not have a valid id');\n        }\n        return sessionId;\n    }\n\n    async retrieveSessionFromBackend(sessionId: string) {\n        try {\n            await SessionBackend.retrieveSession(sessionId).subscribe(\n                (session: SessionDto) => {\n                    this.$store.commit('SessionModule/setCurrentSession', session);\n                }, (error: any) => {\n                    console.error(error);\n                    return;\n                }, () => {\n                    this.session = this.getCurrentGameSession();\n                    this.firstTeam = mapPlayersToGamePlayers(this.session!.first!.players!);\n                    this.secondTeam = mapPlayersToGamePlayers(this.session!.second!.players!);\n                    this.isSessionAvailable = true;\n                });\n        } catch (error) {\n            throw (error);\n        }\n    }\n\n    registerTeamGoal(playerId: string): void {\n        const playerFirstTeam = findPlayerByIdAndTeam(playerId, this.firstTeam);\n        if (!playerFirstTeam) {\n            const playerSecondTeam = findPlayerByIdAndTeam(playerId, this.secondTeam);\n            playerSecondTeam!.goals++;\n        } else {\n            playerFirstTeam.goals++;\n        }\n    }\n\n    unregisterTeamGoal(playerId: string) {\n        const playerFirstTeam = findPlayerByIdAndTeam(playerId, this.firstTeam);\n        if (!playerFirstTeam) {\n            const playerSecondTeam = findPlayerByIdAndTeam(playerId, this.secondTeam);\n            playerSecondTeam!.goals--;\n        } else {\n            playerFirstTeam.goals--;\n        }\n    }\n\n    determineResultOfSessionGame() {\n        if (this.firstTeamGoals === this.secondTeamGoals) {\n            this.session!.first!.result!.result = SessionResult.TIE;\n            this.session!.second!.result!.result = SessionResult.TIE;\n        } else if (this.firstTeamGoals > this.secondTeamGoals) {\n            this.session!.first!.result!.result = SessionResult.WON;\n            this.session!.second!.result!.result = SessionResult.LOST;\n        } else {\n            this.session!.first!.result!.result = SessionResult.LOST;\n            this.session!.second!.result!.result = SessionResult.WON;\n        }\n    }\n\n    finishSessionGame() {\n        this.changeShowFinishGamePopUp();\n        this.determineResultOfSessionGame();\n        mapGoalsToPlayersScoredList(this.firstTeam, this.session!.first!);\n        mapGoalsToPlayersScoredList(this.secondTeam, this.session!.second!);\n        SessionBackend.updateSession(this.session!).subscribe(() => this.backToSessionOverview());\n    }\n\n    backToSessionOverview() {\n        this.$router.push({\n            name: Routes.Main\n        });\n    }\n\n    handleChangeOfTeam() {\n        return this.currentTeam === this.FIRST_TEAM\n            ? this.currentTeam = this.SECOND_TEAM\n            : this.currentTeam = this.FIRST_TEAM;\n    }\n\n}\n</script>\n\n<style scoped lang=\"scss\">\n$team-one-selected: rgb(88, 196, 62);\n$team-one-unselected: rgba(206, 207, 207, 0.2);\n$team-two-selected: rgb(255, 165, 0);\n$team-two-unselected: rgb(255, 165, 0, 0.2);\n\n.body {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    //background: rgb(245, 245, 245);\n    background-image: url(\"http://www.pptback.com/uploads/football-soccer-field-backgrounds-powerpoint.jpg\");\n\n\n}\n\n.body #content {\n    display: flex;\n    flex-basis: 100%;\n    flex-direction: column;\n    align-content: center;\n    margin: 20px;\n\n    .agile {\n        -ms-touch-action: pan-y;\n        touch-action: pan-y;\n\n        [id^=team] {\n            display: flex;\n            flex-wrap: wrap;\n            justify-content: center;\n        }\n    }\n\n    #team-tabs #tabs {\n        border-color: transparent;\n\n        .highlight-team-one {\n            background: $team-one-selected;\n            border-radius: 10px;\n            margin-right: 10px;\n\n            a {\n                color: white;\n                border-color: transparent;\n            }\n        }\n\n        .unhighlight-team-one {\n            background: $team-one-unselected;\n            border-radius: 10px;\n            margin-right: 10px;\n\n            a {\n                color: white;\n                border-color: transparent;\n            }\n        }\n\n        .highlight-team-two {\n            background: $team-two-selected;\n            border-radius: 10px;\n            margin-left: 10px;\n\n            a {\n                color: white;\n                border-color: transparent;\n            }\n        }\n\n        .unhighlight-team-two {\n            background: $team-two-unselected;\n            border-radius: 10px;\n            margin-left: 10px;\n\n            a {\n                color: white;\n                border-color: transparent;\n            }\n        }\n    }\n\n}\n\n.body #content #game-console {\n    display: flex;\n    flex-basis: 30%;\n}\n\n.body .footer-details {\n    display: flex;\n    justify-content: space-between;\n    padding: 4vw;\n    width: 100vw;\n    min-height: 6v;\n}\n\n\n\n</style>\n"]}]}