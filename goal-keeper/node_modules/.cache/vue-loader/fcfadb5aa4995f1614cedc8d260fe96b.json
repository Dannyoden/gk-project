{"remainingRequest":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/src/components/sessions/SessionOverview.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/src/components/sessions/SessionOverview.vue","mtime":1618950669385},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHtDb21wb25lbnQsIFZ1ZSwgV2F0Y2h9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InOwppbXBvcnQgU2Vzc2lvbiBmcm9tICdAL2NvbXBvbmVudHMvc2Vzc2lvbnMvU2Vzc2lvbi52dWUnOwppbXBvcnQgU2Vzc2lvbkR0byBmcm9tICdAL2RhdGEvZHRvL1Nlc3Npb25EdG8nOwppbXBvcnQgU2Vzc2lvbkJhY2tlbmQgZnJvbSAnQC9iYWNrZW5kL1Nlc3Npb25CYWNrZW5kJzsKaW1wb3J0IHsgbmFtZXNwYWNlIH0gZnJvbSAndnVleC1jbGFzcyc7CmltcG9ydCBSb3V0ZXMgZnJvbSAnQC9yb3V0ZXIvUm91dGVzJzsKaW1wb3J0IEhlcm9CYW5uZXIgZnJvbSAiQC9jb21wb25lbnRzL2NvbW1vbi9IZXJvQmFubmVyLnZ1ZSI7CmltcG9ydCBCdXR0b24gZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9CdXR0b24udnVlJzsKaW1wb3J0IFBsYWNlSG9sZGVyIGZyb20gIkAvY29tcG9uZW50cy9jb21tb24vUGxhY2VIb2xkZXIudnVlIjsKCmNvbnN0IFNlc3Npb25Nb2R1bGUgPSBuYW1lc3BhY2UoJ1Nlc3Npb25Nb2R1bGUnKTsKCkBDb21wb25lbnQoewogICAgY29tcG9uZW50czogewogICAgICBQbGFjZUhvbGRlciwKICAgICAgICBTZXNzaW9uLAogICAgICAgIEhlcm9CYW5uZXIsCiAgICAgICAgQnV0dG9uCiAgICB9Cn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlc3Npb25PdmVydmlldyBleHRlbmRzIFZ1ZSB7CgogICAgQFNlc3Npb25Nb2R1bGUuR2V0dGVyKCdzZXNzaW9uT3ZlcnZpZXcnKQogICAgZ2V0U2Vzc2lvbk92ZXJ2aWV3ITogU2Vzc2lvbkR0b1tdOwoKICAgIHNlc3Npb25zRmV0Y2hlZCA9IGZhbHNlOwogICAgcGxhY2Vob2xkZXIgPSBmYWxzZTsKICAgIHBsYWNlaG9sZGVyVGV4dCA9ICdZb3UgaGF2ZW5cJ3QgYWRkZWQgYW55IHNlc3Npb25zIHlldC4gWW91IGNhbiBkbyBzbyBieSBjbGlja2luZyB0aGUgYnV0dG9uIGJlbG93JzsKCiAgICBjcmVhdGVkKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHRoaXMuZ2V0U2Vzc2lvbnMoKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgICB9CiAgICB9CgogICAgQFdhdGNoKCdzZXNzaW9uc0ZldGNoZWQnKQogICAgc2Vzc2lvblJldHJpZXZlZCgpOiB2b2lkIHsKICAgICAgICBpZiAoIXRoaXMuc2Vzc2lvbnNGZXRjaGVkKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy4kZW1pdCgnc2hvd05ld1Nlc3Npb25Qb3BVcCcsIHRydWUpOwogICAgfQoKICAgIGdldFNlc3Npb25zKCkgewogICAgICBsZXQgbG9hZGVyID0gdGhpcy5pbml0TG9hZGVyKCk7CiAgICAgICAgbGV0IHNlc3Npb25zOiBTZXNzaW9uRHRvW10gPSBbXTsKICAgICAgICBTZXNzaW9uQmFja2VuZC5yZXRyaWV2ZVNlc3Npb25zKCkuc3Vic2NyaWJlKAogICAgICAgICAgICAoc2Vzc2lvbkNvbGxlY3Rpb246IFNlc3Npb25EdG9bXSkgPT4gewogICAgICAgICAgICAgICAgc2Vzc2lvbkNvbGxlY3Rpb24uZm9yRWFjaChzZXNzaW9uRHRvID0+IHsKICAgICAgICAgICAgICAgICAgICBzZXNzaW9ucy5wdXNoKHNlc3Npb25EdG8pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sIChlcnJvcjogYW55KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgICAgICAgIGxvYWRlci5oaWRlKCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0sICgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuc2Vzc2lvbnNGZXRjaGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnU2Vzc2lvbk1vZHVsZS9zZXRTZXNzaW9uc0luU2Vzc2lvbk92ZXJ2aWV3Jywgc2Vzc2lvbnMpOwogICAgICAgICAgICAgICAgbG9hZGVyLmhpZGUoKTsKICAgICAgICAgICAgfQogICAgICAgICk7CiAgICB9CgogICAgZ2V0IHNob3dQbGFjZWhvbGRlcigpIHsKICAgICAgICByZXR1cm4gdGhpcy5wbGFjZWhvbGRlciAmJiB0aGlzLnNlc3Npb25zRmV0Y2hlZDsKICAgIH0KCiAgICBnZXQgc2Vzc2lvbk92ZXJ2aWV3KCkgewogICAgICAgIGNvbnN0IG92ZXJ2aWV3ID0gdGhpcy5nZXRTZXNzaW9uT3ZlcnZpZXc7CgogICAgICAgIGlmICghb3ZlcnZpZXcgfHwgb3ZlcnZpZXcubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSB0cnVlOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSBmYWxzZTsKICAgICAgICByZXR1cm4gb3ZlcnZpZXcuc29ydCgoZmlyc3Q6IFNlc3Npb25EdG8sIHNlY29uZDogU2Vzc2lvbkR0bykgPT4gKGZpcnN0LnN0YXJ0IS5nZXRUaW1lKCkgLSBzZWNvbmQuc3RhcnQhLmdldFRpbWUoKSkpOwogICAgfQoKICAgIGNyZWF0ZU5ld1Nlc3Npb24oKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiBSb3V0ZXMuU2Vzc2lvbldpemFyZAogICAgICAgIH0pOwogICAgfQoKICAgIGluaXRMb2FkZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLiRsb2FkaW5nLnNob3coewogICAgICAgIG9wYWNpdHk6IDAuMiwKICAgICAgICBjb2xvcjogJyM1MGZmZTUnLAogICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmZmZmYnLAogICAgICAgIHdpZHRoOiA0MCwKICAgICAgICBjYW5DYW5jZWw6IHRydWUKICAgICAgfSk7CiAgICB9Cn0KCg=="},{"version":3,"sources":["SessionOverview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SessionOverview.vue","sourceRoot":"src/components/sessions","sourcesContent":["<template>\n    <div class=\"body\">\n      <HeroBanner label=\"Training sessions\"/>\n      <PlaceHolder\n          v-if=\"showPlaceholder\"\n          icon=\"fas fa-arrow-down\"\n          :text=\"placeholderText\"/>\n        <div class=\"columns is-multiline is-mobile\">\n            <Session\n                v-for=\"session in sessionOverview\"\n                :key=\"session.id\"\n                :session=\"session\">\n            </Session>\n        </div>\n        <div class=\"fixed-button\">\n            <Button :icon-data=\"{icon: 'fas fa-plus', position: 'left'}\"\n                    class-name=\"button is-centered is-primary\"\n                    text=\"New Session\"\n                    @clicked=\"createNewSession\"/>\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport {Component, Vue, Watch} from 'vue-property-decorator';\nimport Session from '@/components/sessions/Session.vue';\nimport SessionDto from '@/data/dto/SessionDto';\nimport SessionBackend from '@/backend/SessionBackend';\nimport { namespace } from 'vuex-class';\nimport Routes from '@/router/Routes';\nimport HeroBanner from \"@/components/common/HeroBanner.vue\";\nimport Button from '@/components/common/Button.vue';\nimport PlaceHolder from \"@/components/common/PlaceHolder.vue\";\n\nconst SessionModule = namespace('SessionModule');\n\n@Component({\n    components: {\n      PlaceHolder,\n        Session,\n        HeroBanner,\n        Button\n    }\n})\nexport default class SessionOverview extends Vue {\n\n    @SessionModule.Getter('sessionOverview')\n    getSessionOverview!: SessionDto[];\n\n    sessionsFetched = false;\n    placeholder = false;\n    placeholderText = 'You haven\\'t added any sessions yet. You can do so by clicking the button below';\n\n    created() {\n        try {\n            this.getSessions();\n        } catch (error) {\n            throw error;\n        }\n    }\n\n    @Watch('sessionsFetched')\n    sessionRetrieved(): void {\n        if (!this.sessionsFetched) {\n            return;\n        }\n        this.$emit('showNewSessionPopUp', true);\n    }\n\n    getSessions() {\n      let loader = this.initLoader();\n        let sessions: SessionDto[] = [];\n        SessionBackend.retrieveSessions().subscribe(\n            (sessionCollection: SessionDto[]) => {\n                sessionCollection.forEach(sessionDto => {\n                    sessions.push(sessionDto);\n                });\n            }, (error: any) => {\n                console.error(error);\n                loader.hide();\n                return;\n            }, () => {\n                this.sessionsFetched = true;\n                this.$store.commit('SessionModule/setSessionsInSessionOverview', sessions);\n                loader.hide();\n            }\n        );\n    }\n\n    get showPlaceholder() {\n        return this.placeholder && this.sessionsFetched;\n    }\n\n    get sessionOverview() {\n        const overview = this.getSessionOverview;\n\n        if (!overview || overview.length === 0) {\n            this.placeholder = true;\n            return;\n        }\n        this.placeholder = false;\n        return overview.sort((first: SessionDto, second: SessionDto) => (first.start!.getTime() - second.start!.getTime()));\n    }\n\n    createNewSession() {\n        this.$router.push({\n            name: Routes.SessionWizard\n        });\n    }\n\n    initLoader() {\n      return this.$loading.show({\n        opacity: 0.2,\n        color: '#50ffe5',\n        backgroundColor: '#ffffff',\n        width: 40,\n        canCancel: true\n      });\n    }\n}\n\n</script>\n\n<style scoped lang=\"scss\">\n\n.body {\n    display: flex;\n    flex-direction: column;\n    flex-basis: 100%;\n}\n\n.fixed-button {\n    position: fixed;\n    align-self: center;\n    bottom: 6vh;\n    z-index: 1;\n}\n\n.columns {\n  margin: 30px 0 0;\n}\n\n@media screen and (min-width: 768px) {\n  .columns {\n    margin-left: -2rem;\n    margin-right: -2rem;\n  }\n}\n\n\n</style>\n"]}]}