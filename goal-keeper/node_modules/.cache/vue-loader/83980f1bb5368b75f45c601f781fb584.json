{"remainingRequest":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/src/components/wizard/PlayerWizard.vue?vue&type=style&index=0&id=217f0c10&scoped=true&lang=scss&","dependencies":[{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/src/components/wizard/PlayerWizard.vue","mtime":1618387677374},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmJveCB7CiAgbWFyZ2luOiAyMHB4Owp9CgouY29udGFpbmVyIHsKICBtYXJnaW4tdG9wOiA1MHB4Owp9CgouZmllbGQuaXMtZ3JvdXBlZCB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7CiAgbWFyZ2luLXRvcDogNDBweDsKfQoKLnN0ZXBzOm5vdCguaXMtaG9sbG93KSAuc3RlcHMtc2VnbWVudC5pcy1hY3RpdmUgLnN0ZXBzLW1hcmtlcjpub3QoLmlzLWhvbGxvdykgewogIGJhY2tncm91bmQtY29sb3I6ICMwNmQxYjI7CiAgY29sb3I6ICNmZmY7Cn0KCi5mYS1zYXZlOmJlZm9yZSB7CiAgY29udGVudDogIlxmMGM3IjsKICBtYXJnaW4tcmlnaHQ6IDhweDsKfQoKLmZhLWFuZ2xlLWRvdWJsZS1yaWdodDpiZWZvcmUgewogIGNvbnRlbnQ6ICJcZjEwMSI7CiAgbWFyZ2luLWxlZnQ6IDhweDsKfQo="},{"version":3,"sources":["PlayerWizard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyPA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"PlayerWizard.vue","sourceRoot":"src/components/wizard","sourcesContent":["<template>\n    <div class=\"body\">\n        <nav-bar/>\n        <div class=\"box\">\n            <span class=\"tag is-info is-pulled-left\">{{ label }}</span>\n            <button class=\"delete is-pulled-right\"\n                    @click=\"navigateBack\"></button>\n            <div class=\"container\">\n                <div class=\"field\">\n                    <label  class=\"label\"\n                            for=\"given-name\">\n                        Given name\n                    </label>\n                <div class=\"control has-icons-left has-icons-right\">\n                    <input  id=\"given-name\"\n                            class=\"input is-primary\"\n                            v-model=\"player.givenName\"\n                            type=\"text\"\n                            placeholder=\"enter a given name\">\n                    <span class=\"icon is-small is-left\">\n                        <i class=\"fas fa-user\"></i>\n                    </span>\n                </div>\n                <p v-if=\"!givenNameValid\"\n                   class=\"help is-danger\">\n                    Please enter a valid given name\n                </p>\n            </div>\n            <div class=\"field\">\n                <label  class=\"label\"\n                        for=\"surname\">\n                    Surname\n                </label>\n                <div class=\"control has-icons-left has-icons-right\">\n                    <input  id=\"surname\"\n                            class=\"input is-primary\"\n                            v-model=\"player.surname\"\n                            type=\"text\"\n                            placeholder=\"enter a surname\">\n                    <span class=\"icon is-small is-left\">\n                        <i class=\"fas fa-user\"></i>\n                    </span>\n                </div>\n                <p v-if=\"!lastnameValid\"\n                   class=\"help is-danger\">\n                    Please enter a valid surname\n                </p>\n            </div>\n            <div class=\"field\">\n                <label  class=\"label\"\n                        for=\"shirt-number\">\n                    Shirt number\n                </label>\n                <div class=\"control has-icons-left has-icons-right\">\n                    <input  id=\"shirt-number\"\n                            class=\"input is-primary\"\n                            v-model=\"player.shirtNumber\"\n                            type=\"number\"\n                            placeholder=\"enter a shirt number\">\n                    <span class=\"icon is-small is-left\">\n                        <i class=\"fas fa-tshirt\"></i>\n                    </span>\n                </div>\n                <p v-if=\"!shirtNumberIsValid\"\n                   class=\"help is-danger\">\n                    Please enter a shirt number between 1 and 99\n                </p>\n            </div>\n            <div class=\"field\">\n                <label  class=\"label\"\n                        for=\"position\">\n                    Position\n                </label>\n                <div class=\"control\">\n                    <div class=\"select is-primary\">\n                        <select id=\"position\"\n                                v-model=\"player.position\">\n                            <option>GOALKEEPER</option>\n                            <option>DEFENDER</option>\n                            <option>MIDFIELDER</option>\n                            <option>STRIKER</option>\n                        </select>\n                    </div>\n                </div>\n                <p v-if=\"!positionValid\"\n                   class=\"help is-danger\">\n                    Please select a position\n                </p>\n            </div>\n            <div class=\"field\">\n                <label  class=\"label\"\n                        for=\"preferred-foot\">\n                    Preferred foot\n                </label>\n                <div class=\"control\">\n                    <div class=\"select is-primary\">\n                        <select id=\"preferred-foot\"\n                                v-model=\"player.preferredFoot\">\n                            <option>RIGHT</option>\n                            <option>LEFT</option>\n                            <option>BOTH</option>\n                        </select>\n                    </div>\n                </div>\n                <p v-if=\"!preferredFootValid\"\n                   class=\"help is-danger\">\n                    Please select the preferred foot\n                </p>\n            </div>\n            <date-picker\n                label=\"Date of birth\"\n                :date=\"date\"\n                @dateChanged=\"setDate\">\n            </date-picker>\n                <div class=\"field is-grouped\">\n                    <Button :icon-data=\"{icon: 'fas fa-trash-alt', position: 'left'}\"\n                            class-name=\"button is-centered is-danger is-outlined\"\n                            @clicked=\"removePlayer\"/>\n                    <Button :icon-data=\"{icon: 'far fa-save', position: 'left'}\"\n                            class-name=\"button is-centered is-primary is-outlined\"\n                            text=\"Save\"\n                            @clicked=\"submitForm(true)\"/>\n                    <Button :icon-data=\"{icon: 'fas fa-angle-double-right', position: 'right'}\"\n                            class-name=\"button is-centered is-info is-outlined\"\n                            text=\"Add more\"\n                            @clicked=\"submitAndReset\"/>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport {Component, Vue} from 'vue-property-decorator';\nimport NavBar from \"@/components/navigation/NavBar.vue\";\nimport Footer from \"@/components/navigation/Footer.vue\";\nimport PlayerDto from \"@/data/dto/PlayerDto\";\nimport ClubTeamDto from \"@/data/dto/ClubTeamDto\";\nimport Button from \"@/components/common/Button.vue\";\nimport {namespace} from \"vuex-class\";\nimport PlayerBackend from \"@/backend/PlayerBackend\";\nimport DatePicker from \"@/components/wizard/utils/DatePicker.vue\";\n\nconst ClubTeamModule = namespace(\"ClubTeamModule\");\nconst ADD_PLAYER = 'Add player';\nconst EDIT_PLAYER = 'Edit player';\n\n@Component({\n  components: {\n    NavBar,\n    Footer,\n    DatePicker,\n    Button\n  }\n})\nexport default class PlayerWizard extends Vue {\n\n  @ClubTeamModule.State('clubTeam')\n  private clubTeam!: ClubTeamDto;\n\n  private label = ADD_PLAYER;\n  private givenNameValid = true;\n  private lastnameValid = true;\n  private preferredFootValid = true;\n  private shirtNumberIsValid = true;\n  private positionValid = true;\n\n  player: PlayerDto = {\n    id: undefined,\n    givenName: undefined,\n    surname: undefined,\n    shirtNumber: undefined,\n    position: undefined,\n    preferredFoot: undefined,\n    dateOfBirth: undefined\n  }\n\n  created() {\n    const playerId = this.$route.params.playerId;\n    if (playerId && this.clubTeam.players) {\n      this.label = EDIT_PLAYER;\n      this.player = this.findPlayerByIdAndTeam(playerId, this.clubTeam.players)!;\n    }\n  }\n\n  get date() {\n    return this.player.dateOfBirth;\n  }\n\n  private setDate(date: Date) {\n    this.player.dateOfBirth = date;\n  }\n\n  private validateForm(): boolean {\n    this.givenNameValid = this.player!.givenName?.length !> 0;\n    this.lastnameValid = this.player!.surname?.length !> 0;\n    this.shirtNumberIsValid = !this.player!.shirtNumber ? false : this.player.shirtNumber >= 1 && this.player.shirtNumber <= 99;\n    this.positionValid = this.player!.position?.length !> 0;\n    this.preferredFootValid = this.player!.preferredFoot?.length !> 0;\n    return this.givenNameValid && this.lastnameValid && this.shirtNumberIsValid && this.positionValid && this.preferredFootValid;\n  }\n\n  private findPlayerByIdAndTeam(playerId: string, team: PlayerDto[]): PlayerDto | undefined {\n    return team.find(player => player.id === playerId);\n  }\n\n  private removePlayer() {\n    if (this.player) {\n      PlayerBackend.deletePlayer(this.player)\n          .subscribe(() => {\n            this.navigateBack();\n          })\n    }\n  }\n\n  submitAndReset(){\n    this.submitForm(false);\n    this.$router.go(0);\n    this.notify();\n  }\n\n  submitForm(navigateBack: Boolean) {\n    const isValid = this.validateForm();\n    if (isValid && this.player) {\n      PlayerBackend.upsertPlayer(this.player)\n          .subscribe(() => {\n            if (navigateBack) {\n              this.navigateBack();\n              this.notify();\n            }\n          })\n      }\n  }\n\n  navigateBack() {\n    this.$router.push('/manage-team');\n  }\n\n  notify() {\n    this.$notify({\n      group: 'alert',\n      title: 'Player updated'\n    });\n  }\n}\n\n</script>\n<style scoped lang=\"scss\">\n\n.box {\n  margin: 20px;\n}\n\n.container {\n  margin-top: 50px;\n}\n\n.field.is-grouped {\n  display: flex;\n  justify-content: flex-start;\n  margin-top: 40px;\n}\n\n.steps:not(.is-hollow) .steps-segment.is-active .steps-marker:not(.is-hollow) {\n  background-color: #06d1b2;\n  color: #fff;\n}\n\n.fa-save:before {\n  content: \"\\f0c7\";\n  margin-right: 8px;\n}\n\n.fa-angle-double-right:before {\n  content: \"\\f101\";\n  margin-left: 8px;\n}\n</style>\n"]}]}