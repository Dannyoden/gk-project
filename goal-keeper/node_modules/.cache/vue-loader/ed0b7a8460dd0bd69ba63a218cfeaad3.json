{"remainingRequest":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/src/components/sessions/SessionOverview.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/src/components/sessions/SessionOverview.vue","mtime":1627847928279},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/danny/fullstack-projects/goal-keeper-project/goal-keeper/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHtDb21wb25lbnQsIFZ1ZSwgV2F0Y2h9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InOwppbXBvcnQgU2Vzc2lvbiBmcm9tICdAL2NvbXBvbmVudHMvc2Vzc2lvbnMvU2Vzc2lvbi52dWUnOwppbXBvcnQgU2Vzc2lvbkR0byBmcm9tICdAL2RhdGEvZHRvL1Nlc3Npb25EdG8nOwppbXBvcnQgU2Vzc2lvbkJhY2tlbmQgZnJvbSAnQC9iYWNrZW5kL1Nlc3Npb25CYWNrZW5kJzsKaW1wb3J0IHsgbmFtZXNwYWNlIH0gZnJvbSAndnVleC1jbGFzcyc7CmltcG9ydCBSb3V0ZXMgZnJvbSAnQC9yb3V0ZXIvUm91dGVzJzsKaW1wb3J0IEhlcm9CYW5uZXIgZnJvbSAiQC9jb21wb25lbnRzL2NvbW1vbi9IZXJvQmFubmVyLnZ1ZSI7CmltcG9ydCBCdXR0b24gZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9CdXR0b24udnVlJzsKaW1wb3J0IFBsYWNlSG9sZGVyIGZyb20gIkAvY29tcG9uZW50cy9jb21tb24vUGxhY2VIb2xkZXIudnVlIjsKCmNvbnN0IFNlc3Npb25Nb2R1bGUgPSBuYW1lc3BhY2UoJ1Nlc3Npb25Nb2R1bGUnKTsKCkBDb21wb25lbnQoewogICAgY29tcG9uZW50czogewogICAgICBQbGFjZUhvbGRlciwKICAgICAgICBTZXNzaW9uLAogICAgICAgIEhlcm9CYW5uZXIsCiAgICAgICAgQnV0dG9uCiAgICB9Cn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlc3Npb25PdmVydmlldyBleHRlbmRzIFZ1ZSB7CgogICAgQFNlc3Npb25Nb2R1bGUuR2V0dGVyKCdzZXNzaW9uT3ZlcnZpZXcnKQogICAgZ2V0U2Vzc2lvbk92ZXJ2aWV3ITogU2Vzc2lvbkR0b1tdOwoKICAgIHNlc3Npb25zRmV0Y2hlZCA9IGZhbHNlOwogICAgcGxhY2Vob2xkZXIgPSBmYWxzZTsKICAgIHBsYWNlaG9sZGVyVGV4dCA9ICdZb3UgaGF2ZW5cJ3QgYWRkZWQgYW55IHNlc3Npb25zIHlldC4gWW91IGNhbiBkbyBzbyBieSBjbGlja2luZyB0aGUgXCdOZXcgU2Vzc2lvblwnIGJ1dHRvbiBiZWxvdyc7CgogICAgY3JlYXRlZCgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICB0aGlzLmdldFNlc3Npb25zKCk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgICAgfQogICAgfQoKICAgIEBXYXRjaCgnc2Vzc2lvbnNGZXRjaGVkJykKICAgIHNlc3Npb25SZXRyaWV2ZWQoKTogdm9pZCB7CiAgICAgICAgaWYgKCF0aGlzLnNlc3Npb25zRmV0Y2hlZCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRoaXMuJGVtaXQoJ3Nob3dOZXdTZXNzaW9uUG9wVXAnLCB0cnVlKTsKICAgIH0KCiAgICBnZXRTZXNzaW9ucygpIHsKICAgICAgbGV0IGxvYWRlciA9IHRoaXMuaW5pdExvYWRlcigpOwogICAgICAgIGxldCBzZXNzaW9uczogU2Vzc2lvbkR0b1tdID0gW107CiAgICAgICAgU2Vzc2lvbkJhY2tlbmQucmV0cmlldmVTZXNzaW9ucygpLnN1YnNjcmliZSgKICAgICAgICAgICAgKHNlc3Npb25Db2xsZWN0aW9uOiBTZXNzaW9uRHRvW10pID0+IHsKICAgICAgICAgICAgICAgIHNlc3Npb25Db2xsZWN0aW9uLmZvckVhY2goc2Vzc2lvbkR0byA9PiB7CiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbnMucHVzaChzZXNzaW9uRHRvKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LCAoZXJyb3I6IGFueSkgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgICAgICAgICBsb2FkZXIuaGlkZSgpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9LCAoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnNlc3Npb25zRmV0Y2hlZCA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ1Nlc3Npb25Nb2R1bGUvc2V0U2Vzc2lvbnNJblNlc3Npb25PdmVydmlldycsIHNlc3Npb25zKTsKICAgICAgICAgICAgICAgIGxvYWRlci5oaWRlKCk7CiAgICAgICAgICAgIH0KICAgICAgICApOwogICAgfQoKICAgIGdldCBzaG93UGxhY2Vob2xkZXIoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucGxhY2Vob2xkZXIgJiYgdGhpcy5zZXNzaW9uc0ZldGNoZWQ7CiAgICB9CgogICAgZ2V0IHNlc3Npb25PdmVydmlldygpIHsKICAgICAgICBjb25zdCBvdmVydmlldyA9IHRoaXMuZ2V0U2Vzc2lvbk92ZXJ2aWV3OwoKICAgICAgICBpZiAoIW92ZXJ2aWV3IHx8IG92ZXJ2aWV3Lmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gdHJ1ZTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gZmFsc2U7CiAgICAgICAgcmV0dXJuIG92ZXJ2aWV3LnNvcnQoKGZpcnN0OiBTZXNzaW9uRHRvLCBzZWNvbmQ6IFNlc3Npb25EdG8pID0+IChmaXJzdC5zdGFydCEuZ2V0VGltZSgpIC0gc2Vjb25kLnN0YXJ0IS5nZXRUaW1lKCkpKTsKICAgIH0KCiAgICBjcmVhdGVOZXdTZXNzaW9uKCkgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogUm91dGVzLlNlc3Npb25XaXphcmQKICAgICAgICB9KTsKICAgIH0KCiAgICBpbml0TG9hZGVyKCkgewogICAgICByZXR1cm4gdGhpcy4kbG9hZGluZy5zaG93KHsKICAgICAgICBvcGFjaXR5OiAwLjIsCiAgICAgICAgY29sb3I6ICcjNTBmZmU1JywKICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZmZmZmZmJywKICAgICAgICB3aWR0aDogNDAsCiAgICAgICAgY2FuQ2FuY2VsOiB0cnVlCiAgICAgIH0pOwogICAgfQp9Cgo="},{"version":3,"sources":["SessionOverview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SessionOverview.vue","sourceRoot":"src/components/sessions","sourcesContent":["<template>\n    <div class=\"body\">\n      <HeroBanner label=\"Training sessions\"/>\n      <PlaceHolder\n          v-if=\"showPlaceholder\"\n          icon=\"fas fa-arrow-down\"\n          :text=\"placeholderText\"/>\n        <div class=\"columns is-multiline is-mobile\">\n            <Session\n                v-for=\"session in sessionOverview\"\n                :key=\"session.id\"\n                :session=\"session\">\n            </Session>\n        </div>\n        <div class=\"fixed-button\">\n            <Button :icon-data=\"{icon: 'fas fa-plus', position: 'left'}\"\n                    class-name=\"button is-centered is-primary\"\n                    text=\"New Session\"\n                    @clicked=\"createNewSession\"/>\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport {Component, Vue, Watch} from 'vue-property-decorator';\nimport Session from '@/components/sessions/Session.vue';\nimport SessionDto from '@/data/dto/SessionDto';\nimport SessionBackend from '@/backend/SessionBackend';\nimport { namespace } from 'vuex-class';\nimport Routes from '@/router/Routes';\nimport HeroBanner from \"@/components/common/HeroBanner.vue\";\nimport Button from '@/components/common/Button.vue';\nimport PlaceHolder from \"@/components/common/PlaceHolder.vue\";\n\nconst SessionModule = namespace('SessionModule');\n\n@Component({\n    components: {\n      PlaceHolder,\n        Session,\n        HeroBanner,\n        Button\n    }\n})\nexport default class SessionOverview extends Vue {\n\n    @SessionModule.Getter('sessionOverview')\n    getSessionOverview!: SessionDto[];\n\n    sessionsFetched = false;\n    placeholder = false;\n    placeholderText = 'You haven\\'t added any sessions yet. You can do so by clicking the \\'New Session\\' button below';\n\n    created() {\n        try {\n            this.getSessions();\n        } catch (error) {\n            throw error;\n        }\n    }\n\n    @Watch('sessionsFetched')\n    sessionRetrieved(): void {\n        if (!this.sessionsFetched) {\n            return;\n        }\n        this.$emit('showNewSessionPopUp', true);\n    }\n\n    getSessions() {\n      let loader = this.initLoader();\n        let sessions: SessionDto[] = [];\n        SessionBackend.retrieveSessions().subscribe(\n            (sessionCollection: SessionDto[]) => {\n                sessionCollection.forEach(sessionDto => {\n                    sessions.push(sessionDto);\n                });\n            }, (error: any) => {\n                console.error(error);\n                loader.hide();\n                return;\n            }, () => {\n                this.sessionsFetched = true;\n                this.$store.commit('SessionModule/setSessionsInSessionOverview', sessions);\n                loader.hide();\n            }\n        );\n    }\n\n    get showPlaceholder() {\n        return this.placeholder && this.sessionsFetched;\n    }\n\n    get sessionOverview() {\n        const overview = this.getSessionOverview;\n\n        if (!overview || overview.length === 0) {\n            this.placeholder = true;\n            return;\n        }\n        this.placeholder = false;\n        return overview.sort((first: SessionDto, second: SessionDto) => (first.start!.getTime() - second.start!.getTime()));\n    }\n\n    createNewSession() {\n        this.$router.push({\n            name: Routes.SessionWizard\n        });\n    }\n\n    initLoader() {\n      return this.$loading.show({\n        opacity: 0.2,\n        color: '#50ffe5',\n        backgroundColor: '#ffffff',\n        width: 40,\n        canCancel: true\n      });\n    }\n}\n\n</script>\n\n<style scoped lang=\"scss\">\n\n.body {\n    display: flex;\n    flex-direction: column;\n    flex-basis: 100%;\n}\n\n.fixed-button {\n    position: fixed;\n    align-self: center;\n    bottom: 6vh;\n    z-index: 1;\n}\n\n.columns {\n  margin: 30px 0 0;\n}\n\n@media screen and (min-width: 768px) {\n  .columns {\n    margin-left: -2rem;\n    margin-right: -2rem;\n  }\n}\n\n\n</style>\n"]}]}